(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{3578:function(e,t,n){Promise.resolve().then(n.bind(n,7270))},7270:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(4700),a=n(3487),o=n(6759),l=n(9539);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),i=(0,l.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),u=(0,l.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var c=n(295);function f(){let[e,t]=(0,a.useState)([]),[n,l]=(0,a.useState)("stopTime"),[f,h]=(0,a.useState)("desc"),[d,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{m(!0),async function(){t(await (0,o.EX)())}()},[]);let p=[...e].sort((e,t)=>{let r=e[n],a=t[n];return r<a?"asc"===f?-1:1:r>a?"asc"===f?1:-1:0}),x=e=>{n===e?h("asc"===f?"desc":"asc"):(l(e),h("desc"))},y=e=>new Date(e).toLocaleString(),g=(e,t)=>{let n=t-e,r=Math.floor(n/6e4%60),a=Math.floor(n/36e5),o=[];return a>0&&o.push("".concat(a,"h")),(r>0||a>0)&&o.push("".concat(r,"m")),o.push("".concat(Math.floor(n/1e3%60),"s")),o.join(" ")},v=e=>{let{k:t,label:a}=e;return(0,r.jsxs)("button",{onClick:()=>x(t),className:"flex items-center gap-1 font-semibold hover:text-indigo-400",children:[a,n===t?"asc"===f?(0,r.jsx)(s,{size:16}):(0,r.jsx)(i,{size:16}):null]})};return d?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col items-center p-4",children:[(0,r.jsx)("header",{className:"mb-8 flex w-full max-w-4xl items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(c.default,{href:"/",className:"rounded-full p-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800",children:(0,r.jsx)(u,{size:24})}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Game History"})]})}),(0,r.jsx)("div",{className:"w-full max-w-4xl overflow-x-auto rounded-lg border border-gray-200 shadow-sm dark:border-gray-800",children:(0,r.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 bg-gray-50 dark:border-gray-800 dark:bg-gray-900/50",children:[(0,r.jsx)("th",{className:"p-4 whitespace-nowrap",children:(0,r.jsx)(v,{k:"startTime",label:"Started"})}),(0,r.jsx)("th",{className:"p-4 whitespace-nowrap",children:(0,r.jsx)(v,{k:"stopTime",label:"Finished"})}),(0,r.jsx)("th",{className:"p-4 font-semibold whitespace-nowrap",children:"Duration"}),(0,r.jsx)("th",{className:"p-4 whitespace-nowrap",children:(0,r.jsx)(v,{k:"score",label:"Score"})}),(0,r.jsx)("th",{className:"p-4 whitespace-nowrap",children:(0,r.jsx)(v,{k:"moves",label:"Moves"})}),(0,r.jsx)("th",{className:"p-4 whitespace-nowrap",children:(0,r.jsx)(v,{k:"seed",label:"Seed"})})]})}),(0,r.jsx)("tbody",{children:0===p.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No games played yet."})}):p.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-gray-900/30",children:[(0,r.jsx)("td",{className:"p-4 whitespace-nowrap text-sm",children:y(e.startTime)}),(0,r.jsx)("td",{className:"p-4 whitespace-nowrap text-sm",children:y(e.stopTime)}),(0,r.jsx)("td",{className:"p-4 whitespace-nowrap text-sm",children:g(e.startTime,e.stopTime)}),(0,r.jsx)("td",{className:"p-4 font-medium",children:e.score.toLocaleString()}),(0,r.jsx)("td",{className:"p-4",children:e.moves.toLocaleString()}),(0,r.jsx)("td",{className:"p-4 font-mono text-xs",children:e.seed})]},t))})]})})]}):null}},7565:function(e,t,n){"use strict";n.d(t,{$c:function(){return b},Pw:function(){return w},TZ:function(){return y},WR:function(){return s},hJ:function(){return v},hr:function(){return i},pJ:function(){return g},x0:function(){return o}});var r=n(3487);function a(){return Math.floor(4*Math.random())+1}function o(){return{id:Math.random(),value:a(),removed:!1}}function l(e,t){let{x:n,y:r}=e;return r*t.length+n}function s(e){let t=Array.from({length:e}).map(t=>Array.from({length:e}).map(e=>o())),n=m(t);for(;n.length>0;){for(let e of n){let{x:n,y:r}=e.origin;t[n][r]={...t[n][r],value:a()}}n=m(t)}return t}function i(e){return e.slice().map(e=>e.slice())}function u(e,t){return e.x==t.x&&1==Math.abs(e.y-t.y)||e.y==t.y&&1==Math.abs(e.x-t.x)}function c(e,t){let n=t[e.x][e.y],r=function(e,t){let n=[],r=t[e.x][e.y];for(let a=e.y-1;a>=0&&t[e.x][a].value==r.value;a--)n=[...n,{x:e.x,y:a}];return n}(e,t),a=function(e,t){let n=[],r=t[e.x][e.y];for(let a=e.y+1;a<t[e.x].length&&t[e.x][a].value==r.value;a++)n=[...n,{x:e.x,y:a}];return n}(e,t),o=function(e,t){let n=[],r=t[e.x][e.y];for(let a=e.x-1;a>=0&&t[a][e.y].value==r.value;a--)n=[...n,{x:a,y:e.y}];return n}(e,t),l=function(e,t){let n=[],r=t[e.x][e.y];for(let a=e.x+1;a<t.length&&t[a][e.y].value==r.value;a++)n=[...n,{x:a,y:e.y}];return n}(e,t),s=r.length+a.length,i=o.length+l.length,u=[];s>=2&&(u=[...u,...r,...a]),i>=2&&(u=[...u,...l,...o]);let c=u.length;return 0==c?{match:!1}:{newValue:n.value+c-1,matchedTiles:u,origin:e,match:!0}}function f(e,t,n){let r=i(n);if(r[t.x][t.y]=n[e.x][e.y],r[e.x][e.y]=n[t.x][t.y],!u(e,t)||!c(e,r).match&&!c(t,r).match)return[{board:r,points:0},{board:n,points:0}];let a=i(r),o=c(e,a),l=c(t,a),s=[];o.match&&(a[e.x][e.y]={...a[e.x][e.y],value:o.newValue},s.push(o)),l.match&&(a[t.x][t.y]={...a[t.x][t.y],value:l.newValue},s.push(l));let f=h(s,a),m=function(e){let t=[],n=d(e),r=i(e);for(;n.length>0;){let e=i(r);for(let t of n){let{x:n,y:r}=t.origin;e[n][r]={...e[n][r],value:t.newValue}}let a=h(n,e);t=[...t,{board:e,points:n.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...a.map(e=>({board:e,points:0}))],n=d(a[1]),r=a[1]}return t}(f[1]);return[{board:r,points:0},{board:a,points:s.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...f.map(e=>({board:e,points:0})),...m]}function h(e,t){let n=i(t);for(let t of e)for(let{x:e,y:r}of t.matchedTiles)n[e][r]={...n[e][r],removed:!0,mergedTo:t.origin};let r=i(t);for(let n=0;n<t.length;n++){let a=0;for(let o=t[n].length-1;o>=0;o--){if(e.map(e=>e.matchedTiles).flat().find(e=>e.x==n&&e.y==o)){a+=1;continue}r[n][o+a]=t[n][o]}for(let e=0;e<a;e++)r[n][e]=o()}return[n,r]}function d(e){let t=m(e).map(e=>({position:e.origin,...e})).sort((e,t)=>t.newValue-e.newValue),n=new Set,r=[];for(let a of t)n.has(l(a.position,e))||a.matchedTiles.some(t=>n.has(l(t,e)))||(n.add(l(a.position,e)),a.matchedTiles.forEach(t=>{n.add(l(t,e))}),r=[...r,a]);return r}function m(e){return e.map((t,n)=>t.map((t,r)=>{let a=c({x:n,y:r},e);return a.match?a:void 0})).flat().filter(e=>void 0!=e)}function p(e){return void 0==x(e)}function x(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++){let r={x:t,y:n};for(let a of[{x:t-1,y:n},{x:t+1,y:n},{x:t,y:n-1},{x:t,y:n+1}]){if(a.x<0||a.x>=e.length||a.y<0||a.y>=e[t].length)continue;let o=i(e),l=o[t][n];if(o[t][n]=o[a.x][a.y],o[a.x][a.y]=l,c(r,o).match||c(a,o).match)return[r,a]}}}function y(e){let t=["#0a9396","#e9d8a6","#ee9b00","#ca6702","#005f73","#ae2012","#86350f","#94d2bd","#9b2226"];return e.value>t.length-1?"hsl(".concat((e.value-t.length)*36," 100% 75%)"):t[e.value-1]}function g(e){if(!e.startsWith("#"))return"#101013";let t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return[t,n,r]=[t,n,r].map(e=>e/255).map(e=>e<=.03928?e/12.92:((e+.055)/1.055)**2.4),.2126*t+.7152*n+.0722*r>.5?"#101050":"#fafafa"}function v(e,t,n,r,a,o){return encodeURIComponent(JSON.stringify({boardNumbers:e.flat().map(e=>e.value),points:t,size:e.length,moves:n,startTime:r,seed:a,duration:o}))}function w(e){var t;let n=JSON.parse(decodeURIComponent(e)),r=n.size,a=n.boardNumbers,l=null!==(t=n.moves)&&void 0!==t?t:0;return{board:Array.from({length:r},(e,t)=>Array.from({length:r},(e,n)=>{let l=t*r+n;return{...o(),value:a[l]}})),points:n.points,size:r,moves:l,startTime:n.startTime,seed:n.seed,duration:n.duration}}function b(e){return{board:(0,r.useMemo)(()=>s(e),[e]),swapTile:f,getTileColor:y,isAdjacent:u,getPositionsThatAlmostMatch:x,isGameOver:p,getTileValue:c}}},6759:function(e,t,n){"use strict";n.d(t,{gH:function(){return c},EX:function(){return h},ky:function(){return m},YO:function(){return i},W$:function(){return u},iN:function(){return d},a9:function(){return f},oT:function(){return o},rE:function(){return s}});var r=n(3352),a=n(7565);async function o(e){let{key:t,value:n}=e;await r.u.set({key:t,value:n})}async function l(e){var t;let{key:n}=e,a=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var a=n[r];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}}(n);return a?(await o({key:n,value:a}),document.cookie="".concat(encodeURIComponent(n),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"),a):null!==(t=(await r.u.get({key:n})).value)&&void 0!==t?t:void 0}async function s(e){await o({key:"highscore",value:e.toString()})}async function i(){let e=await l({key:"highscore"});return parseInt(null!=e?e:"0")}async function u(){return!!await l({key:"doneTutorial"})}async function c(){await o({key:"doneTutorial",value:"true"})}async function f(e){let t=await l({key:"gameHistory"}),n=t?JSON.parse(t):[];n.push(e),await o({key:"gameHistory",value:JSON.stringify(n)})}async function h(){let e=await l({key:"gameHistory"});if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}}async function d(e,t,n,r,l,s){let i=(0,a.hJ)(e,t,n,r,l,s);await o({key:"gameState",value:i})}async function m(){let e=await l({key:"gameState"});if(e)return(0,a.Pw)(e)}}},function(e){e.O(0,[322,122,307,744],function(){return e(e.s=3578)}),_N_E=e.O()}]);