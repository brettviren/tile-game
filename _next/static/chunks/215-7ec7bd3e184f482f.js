"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[215],{7565:function(e,t,n){n.d(t,{$c:function(){return w},Pw:function(){return b},TZ:function(){return x},WR:function(){return i},hJ:function(){return v},hr:function(){return u},pJ:function(){return y},x0:function(){return o}});var r=n(3487);function l(){return Math.floor(4*Math.random())+1}function o(){return{id:Math.random(),value:l(),removed:!1}}function a(e,t){let{x:n,y:r}=e;return r*t.length+n}function i(e){let t=Array.from({length:e}).map(t=>Array.from({length:e}).map(e=>o())),n=g(t);for(;n.length>0;){for(let e of n){let{x:n,y:r}=e.origin;t[n][r]={...t[n][r],value:l()}}n=g(t)}return t}function u(e){return e.slice().map(e=>e.slice())}function f(e,t){return e.x==t.x&&1==Math.abs(e.y-t.y)||e.y==t.y&&1==Math.abs(e.x-t.x)}function c(e,t){let n=t[e.x][e.y],r=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.y-1;l>=0&&t[e.x][l].value==r.value;l--)n=[...n,{x:e.x,y:l}];return n}(e,t),l=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.y+1;l<t[e.x].length&&t[e.x][l].value==r.value;l++)n=[...n,{x:e.x,y:l}];return n}(e,t),o=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.x-1;l>=0&&t[l][e.y].value==r.value;l--)n=[...n,{x:l,y:e.y}];return n}(e,t),a=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.x+1;l<t.length&&t[l][e.y].value==r.value;l++)n=[...n,{x:l,y:e.y}];return n}(e,t),i=r.length+l.length,u=o.length+a.length,f=[];i>=2&&(f=[...f,...r,...l]),u>=2&&(f=[...f,...a,...o]);let c=f.length;return 0==c?{match:!1}:{newValue:n.value+c-1,matchedTiles:f,origin:e,match:!0}}function s(e,t,n){let r=u(n);if(r[t.x][t.y]=n[e.x][e.y],r[e.x][e.y]=n[t.x][t.y],!f(e,t)||!c(e,r).match&&!c(t,r).match)return[{board:r,points:0},{board:n,points:0}];let l=u(r),o=c(e,l),a=c(t,l),i=[];o.match&&(l[e.x][e.y]={...l[e.x][e.y],value:o.newValue},i.push(o)),a.match&&(l[t.x][t.y]={...l[t.x][t.y],value:a.newValue},i.push(a));let s=h(i,l),g=function(e){let t=[],n=d(e),r=u(e);for(;n.length>0;){let e=u(r);for(let t of n){let{x:n,y:r}=t.origin;e[n][r]={...e[n][r],value:t.newValue}}let l=h(n,e);t=[...t,{board:e,points:n.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...l.map(e=>({board:e,points:0}))],n=d(l[1]),r=l[1]}return t}(s[1]);return[{board:r,points:0},{board:l,points:i.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...s.map(e=>({board:e,points:0})),...g]}function h(e,t){let n=u(t);for(let t of e)for(let{x:e,y:r}of t.matchedTiles)n[e][r]={...n[e][r],removed:!0,mergedTo:t.origin};let r=u(t);for(let n=0;n<t.length;n++){let l=0;for(let o=t[n].length-1;o>=0;o--){if(e.map(e=>e.matchedTiles).flat().find(e=>e.x==n&&e.y==o)){l+=1;continue}r[n][o+l]=t[n][o]}for(let e=0;e<l;e++)r[n][e]=o()}return[n,r]}function d(e){let t=g(e).map(e=>({position:e.origin,...e})).sort((e,t)=>t.newValue-e.newValue),n=new Set,r=[];for(let l of t)n.has(a(l.position,e))||l.matchedTiles.some(t=>n.has(a(t,e)))||(n.add(a(l.position,e)),l.matchedTiles.forEach(t=>{n.add(a(t,e))}),r=[...r,l]);return r}function g(e){return e.map((t,n)=>t.map((t,r)=>{let l=c({x:n,y:r},e);return l.match?l:void 0})).flat().filter(e=>void 0!=e)}function m(e){return void 0==p(e)}function p(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++){let r={x:t,y:n};for(let l of[{x:t-1,y:n},{x:t+1,y:n},{x:t,y:n-1},{x:t,y:n+1}]){if(l.x<0||l.x>=e.length||l.y<0||l.y>=e[t].length)continue;let o=u(e),a=o[t][n];if(o[t][n]=o[l.x][l.y],o[l.x][l.y]=a,c(r,o).match||c(l,o).match)return[r,l]}}}function x(e){let t=["#0a9396","#e9d8a6","#ee9b00","#ca6702","#005f73","#ae2012","#86350f","#94d2bd","#9b2226"];return e.value>t.length-1?"hsl(".concat((e.value-t.length)*36," 100% 75%)"):t[e.value-1]}function y(e){if(!e.startsWith("#"))return"#101013";let t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return[t,n,r]=[t,n,r].map(e=>e/255).map(e=>e<=.03928?e/12.92:((e+.055)/1.055)**2.4),.2126*t+.7152*n+.0722*r>.5?"#101050":"#fafafa"}function v(e,t,n,r,l,o){return encodeURIComponent(JSON.stringify({boardNumbers:e.flat().map(e=>e.value),points:t,size:e.length,moves:n,startTime:r,seed:l,duration:o}))}function b(e){var t;let n=JSON.parse(decodeURIComponent(e)),r=n.size,l=n.boardNumbers,a=null!==(t=n.moves)&&void 0!==t?t:0;return{board:Array.from({length:r},(e,t)=>Array.from({length:r},(e,n)=>{let a=t*r+n;return{...o(),value:l[a]}})),points:n.points,size:r,moves:a,startTime:n.startTime,seed:n.seed,duration:n.duration}}function w(e){return{board:(0,r.useMemo)(()=>i(e),[e]),swapTile:s,getTileColor:x,isAdjacent:f,getPositionsThatAlmostMatch:p,isGameOver:m,getTileValue:c}}},7215:function(e,t,n){n.d(t,{T7:function(){return a},vF:function(){return o}});var r=n(7565),l=n(3394).Buffer;function o(e){let t=new URLSearchParams(e),n=t.get("b"),o=t.get("p"),a=t.get("s");if(null===n||null===o||null===a)return;let i=parseInt(o),u=parseInt(a),f=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*e.length%4),n=l.from(t,"base64"),r="";n.forEach(e=>{r+=e.toString(2).padStart(8,"0")});let o=[];for(let e=0;e<r.length;e+=4)o.push(parseInt(r.slice(e,e+4),2)+1);return o}(n);if(!(isNaN(i)||isNaN(u)||f.some(isNaN)))return{board:Array.from({length:u},(e,t)=>Array.from({length:u},(e,n)=>{let l=t*u+n;return{...(0,r.x0)(),value:f[l]}})),points:i}}function a(e,t,n){return new Promise((l,o)=>{let a=document.createElement("canvas"),i=e.length,u=3*i+16;a.width=67*i-3,a.height=67*i-3+u;let f=a.getContext("2d");if(!f){o(Error("Could not get canvas context"));return}let c=window.getComputedStyle(document.body,null).fontFamily;e.forEach((e,t)=>{e.forEach((e,n)=>{let l=67*t,o=67*n,a=(0,r.TZ)(e),i=new Path2D;i.roundRect(l,o,64,64,7),f.fillStyle=a,f.fill(i);let u=(0,r.pJ)(a);f.fillStyle=u,f.textAlign="center",f.textBaseline="middle",f.font="bold 22px ".concat(c),f.fillText(Math.pow(2,e.value).toString(),l+32,o+32)})}),f.fillStyle="white",f.font="bold 64px ".concat(c),f.shadowColor="black",f.shadowBlur=2,f.fillText(n.toLocaleString("en-US"),(a.height-u)/2,a.width/2),f.font="bold ".concat(16,"px ").concat(c),f.textAlign="left",f.textBaseline="middle",f.fillText("Moves: ".concat(t.toLocaleString("en-US")),3,(i+0)*67+12),f.textAlign="right",f.textBaseline="middle",f.fillText("ExponenTile",67*i-3,(i+0)*67+12),a.toBlob(e=>{e?l(new File([e],"ExponenTile.png",{type:"image/png"})):o(Error("Canvas to Blob conversion failed"))},"image/png")})}}}]);